<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belajar Laravel</title>

    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>
        <main>
            <header>
                
            </header>

            <div class="content">
<pre>
    ğŸ‘‰ 2ï¸âƒ£ API Resource

    Kalau REST itu fondasi,
    maka API Resource itu alat untuk merapikan output JSON.

    ğŸ§  Kenapa Perlu API Resource?

    Bayangin kamu return model langsung:

    return Post::all();


    Masalahnya:

    Semua kolom ikut keluar

    Field sensitif bisa ikut tampil

    Struktur tidak konsisten

    Susah kontrol relasi

    Itu tidak clean.

    
    
    
    
    
    
    
    ğŸ”¥ Solusinya: API Resource

    API Resource adalah:

    Class khusus untuk mengatur bagaimana data diubah menjadi JSON.

    Jadi bukan model yang atur output,
    tapi Resource.

    ğŸ›  Cara Membuat API Resource
    php artisan make:resource PostResource


    File akan dibuat di:

    app/Http/Resources/PostResource.php

    
    
    
    
    
    
    
    ğŸ§± Struktur Dasar Resource
    class PostResource extends JsonResource
    {
        public function toArray($request)
        {
            return [
                'id' => $this->id,
                'title' => $this->title,
                'content' => $this->content,
                'created_at' => $this->created_at,
            ];
        }
    }


    Sekarang kita kontrol output sendiri ğŸ”¥

    
    
    
    
    
    
    
    ğŸ”¥ Cara Pakai di Controller
    Untuk satu data:
    return new PostResource($post);

    Untuk banyak data:
    return PostResource::collection(Post::all());


    Boom ğŸ’¥
    Output sudah terstruktur rapi.

    
    
    
    
    
    
    
    ğŸ§  Kenapa Ini Powerful?

    Karena kamu bisa:

    âœ… Sembunyikan kolom
    âœ… Ubah nama field
    âœ… Tambah field custom
    âœ… Format tanggal
    âœ… Atur relasi
    âœ… Buat nested resource

    
    
    
    
    
    
    
    ğŸ”¥ Contoh Ubah Nama Field

    Misalnya di database created_at,
    tapi di API mau createdAt.

    'createdAt' => $this->created_at->format('Y-m-d')

    
    
    
    
    
    
    
    ğŸ”¥ Tambah Field Custom
    'is_published' => $this->status === 'published',


    Field ini tidak ada di database,
    tapi bisa ditambahkan di Resource.

    
    
    
    
    
    
    
    ğŸ”¥ Resource + Relasi

    Misalnya Post punya relasi ke User.

    Di resource:

    'author' => new UserResource($this->whenLoaded('user')),


    Lalu di controller:

    $post = Post::with('user')->find($id);
    return new PostResource($post);


    Sekarang API kamu clean dan modular ğŸ”¥

    
    
    
    
    
    
    
    ğŸ§  Resource Collection Custom

    Kalau mau response lebih terstruktur:

    php artisan make:resource PostCollection


    Bisa atur format seperti:

    return [
        'success' => true,
        'total' => $this->collection->count(),
        'data' => $this->collection,
    ];

    
    
    
    
    
    
    
    ğŸ”¥ API Resource vs Return Model Langsung
    Return Model	API Resource
    Tidak terkontrol	Fully controlled
    Semua field keluar	Bisa pilih field
    Tidak fleksibel	Bisa format custom
    Tidak scalable	Production ready
    
    
    
    
    
    
    
    ğŸ§  Contoh Response Profesional

    Dengan API Resource, response bisa jadi:

    {
    "data": {
        "id": 1,
        "title": "Belajar Laravel",
        "content": "Isi artikel...",
        "createdAt": "2026-02-17",
        "author": {
            "id": 5,
            "name": "Fulan"
        }
    }
    }


    Itu sudah standar industri.

    
    
    
    
    
    
    
    ğŸ¯ Best Practice

    âœ… Selalu pakai Resource untuk API
    âœ… Jangan return model mentah
    âœ… Gunakan collection() untuk list
    âœ… Gunakan whenLoaded() untuk relasi
    âœ… Pisahkan Resource untuk tiap model

    
    
    
    
    
    
    
    âš  Kesalahan Umum Pemula

    âŒ Tidak pakai resource
    âŒ Format data di controller
    âŒ Logic berat di resource
    âŒ Tidak eager loading relasi

    
    
    
    
    
    
    
    ğŸ Kesimpulan

    API Resource adalah:

    ğŸ¨ Pengatur tampilan JSON
    ğŸ§¼ Pembersih output API
    ğŸ“¦ Pembungkus data
    ğŸš€ Bikin API scalable

    Kalau kamu pakai REST + Resource,
    API kamu sudah level production.
</pre>

            </div>
        </main>
    </div>
    <script>
        fetch('layout/aside.html').then( response => response.text()).then( data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(currentPage == 'index.html'){
                    document.getElementById('1-1-php-dasar').classList.add('active');
                } else if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>