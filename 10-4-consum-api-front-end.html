<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belajar Laravel</title>

    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>
        <main>
            <header>
                
            </header>

            <div class="content">
<pre>
    ğŸ‘‰ 4ï¸âƒ£ Consume API dari Frontend

    Kalau tadi kita sudah punya:

    REST API âœ…

    API Resource âœ…

    Token Auth (Sanctum) âœ…

    Sekarang kita belajar:

    Gimana cara frontend ambil dan kirim data ke Laravel API?

    
    
    
    
    
    
    
    ğŸ§  Apa Itu â€œConsume APIâ€?

    Consume API artinya:

    Frontend mengirim request ke backend, lalu menerima response (biasanya JSON).

    Arsitekturnya:

    Frontend (Vue / React / Mobile)
            â†“ HTTP Request
    Laravel API (JSON)
            â†“ HTTP Response
    Frontend render data


    Frontend tidak lagi pakai Blade.
    Semua komunikasi lewat HTTP.

    
    
    
    
    
    
    
    ğŸ”¥ Cara Frontend Kirim Request

    Biasanya pakai:

    fetch() (native JS)

    axios (paling populer)

    library bawaan framework

    Contoh umum pakai axios.

    
    
    
    
    
    
    
    ğŸ§± Contoh 1ï¸âƒ£ Ambil Data (GET)

    Misalnya endpoint:

    GET /api/posts

    Contoh pakai axios:
    axios.get('http://localhost:8000/api/posts')
        .then(response => {
            console.log(response.data);
        })
        .catch(error => {
            console.error(error);
        });


    Laravel kirim JSON â†’ frontend terima â†’ render.

    
    
    
    
    
    
    
    ğŸ§± Contoh 2ï¸âƒ£ Kirim Data (POST)

    Misalnya buat post baru:

    axios.post('http://localhost:8000/api/posts', {
        title: 'Belajar API',
        content: 'Ini isi artikel'
    })
    .then(response => {
        console.log(response.data);
    });

    
    
    
    
    
    
    
    ğŸ” Kirim Token Sanctum

    Kalau endpoint butuh login:

    Tambahkan header Authorization:

    axios.get('http://localhost:8000/api/profile', {
        headers: {
            Authorization: 'Bearer ' + token
        }
    });


    Token didapat dari login sebelumnya.

    
    
    
    
    
    
    
    ğŸ§  Flow Login di Frontend

    1ï¸âƒ£ User isi email & password
    2ï¸âƒ£ Frontend kirim ke /api/login
    3ï¸âƒ£ Backend kirim token
    4ï¸âƒ£ Frontend simpan token (localStorage / memory)
    5ï¸âƒ£ Semua request berikutnya kirim token

    Contoh simpan token:

    localStorage.setItem('token', response.data.token);

    
    
    
    
    
    
    
    ğŸ”¥ Contoh Full Flow
    Login
    axios.post('/api/login', {
        email: 'user@email.com',
        password: 'password'
    })
    .then(res => {
        localStorage.setItem('token', res.data.token);
    });

    Ambil Profile
    axios.get('/api/profile', {
        headers: {
            Authorization: 'Bearer ' + localStorage.getItem('token')
        }
    })
    .then(res => {
        console.log(res.data);
    });

    
    
    
    
    
    
    
    ğŸ§  Handle Error dari Backend

    Misalnya validation error (422):

    .catch(error => {
        if (error.response.status === 422) {
            console.log(error.response.data.errors);
        }
    });


    Backend Laravel otomatis kirim JSON error kalau validation gagal.

    
    
    
    
    
    
    
    ğŸ”¥ CORS (Penting!)

    Kalau frontend beda domain dengan backend,
    harus aktifkan CORS.

    Laravel sudah support via:

    config/cors.php


    Kalau tidak diatur, request akan diblokir browser.

    
    
    
    
    
    
    
    ğŸ§  Best Practice Frontendâ€“Backend

    âœ… Pisahkan base URL
    âœ… Gunakan interceptor untuk token
    âœ… Handle error global
    âœ… Jangan simpan token sembarangan
    âœ… Gunakan HTTPS di production

    
    
    
    
    
    
    
    ğŸ§± Contoh Interceptor (Axios)

    Supaya tidak tulis header terus:

    axios.interceptors.request.use(config => {
        const token = localStorage.getItem('token');
        if (token) {
            config.headers.Authorization = 'Bearer ' + token;
        }
        return config;
    });


    Sekarang semua request otomatis kirim token ğŸ”¥

    
    
    
    
    
    
    
    ğŸ¯ Masalah Umum Pemula

    âŒ Lupa kirim Bearer
    âŒ Salah endpoint URL
    âŒ CORS error
    âŒ Tidak handle error
    âŒ Token expired tapi tidak dihapus

    
    
    
    
    
    
    
    ğŸ Gambaran Besar

    Consume API itu cuma:

    1ï¸âƒ£ Kirim request
    2ï¸âƒ£ Kirim token (jika perlu)
    3ï¸âƒ£ Terima JSON
    4ï¸âƒ£ Render data

    Tapi ini fondasi SPA & mobile.

    Sekarang Laravel kamu sudah bisa:

    Jadi backend API

    Login pakai token

    Dihubungkan ke frontend

    ğŸ”¥ Sudah fullstack modern.
</pre>

            </div>
        </main>
    </div>
    <script>
        fetch('layout/aside.html').then( response => response.text()).then( data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(currentPage == 'index.html'){
                    document.getElementById('1-1-php-dasar').classList.add('active');
                } else if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>