<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belajar Laravel</title>

    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>
        <main>
            <header>
                
            </header>

            <div class="content">
<pre>
    ğŸ‘‰ 3ï¸âƒ£ Image Handling (Resize, Compress, Thumbnail)

    Upload gambar saja itu belum cukup.

    Kalau kamu langsung simpan gambar mentah dari HP user:

    Ukuran bisa 5MB â€“ 10MB ğŸ˜±

    Resolusi bisa 4000px

    Website jadi lambat

    Storage cepat penuh

    Makanya kita perlu:

    ğŸ–¼ Resize
    ğŸ—œ Compress
    ğŸ–¼ Generate Thumbnail

    
    
    
    
    
    
    
    ğŸ§  Kenapa Image Handling Itu Penting?

    Bayangkan:

    User upload foto 6MB
    Kamu tampilkan di halaman produk

    10 produk Ã— 6MB = 60MB load ğŸ˜¬

    User kabur.

    Solusinya:

    Resize ke ukuran optimal

    Compress

    Buat thumbnail kecil

    
    
    
    
    
    
    
    ğŸ”¥ Tools yang Biasanya Dipakai di Laravel

    Paling populer:

    Intervention Image

    Library ini memudahkan:

    Resize

    Crop

    Encode

    Watermark

    Compress

    
    
    
    
    
    
    
    ğŸ§± 1ï¸âƒ£ Install Intervention Image
    composer require intervention/image

    
    
    
    
    
    
    
    ğŸ”¥ 2ï¸âƒ£ Contoh Resize Sebelum Disimpan

    Misalnya kita ingin:

    Resize ke max width 800px

    Simpan versi compressed

    Contoh di controller:

    use Intervention\Image\Facades\Image;
    use Illuminate\Support\Facades\Storage;

    $file = $request->file('image');

    $image = Image::make($file)
        ->resize(800, null, function ($constraint) {
            $constraint->aspectRatio();
            $constraint->upsize();
        })
        ->encode('jpg', 75); // compress 75%

    $filename = time() . '.jpg';

    Storage::disk('public')->put("products/$filename", $image);

    $imagePath = "products/$filename";


    ğŸ”¥ Sekarang gambar:

    Lebih kecil

    Tetap proporsional

    Tidak pecah

    
    
    
    
    
    
    
    ğŸ§  3ï¸âƒ£ Membuat Thumbnail

    Biasanya kita buat 2 versi:

    Original (800px)

    Thumbnail (300px)

    Contoh:

    $thumbnail = Image::make($file)
        ->fit(300, 300)
        ->encode('jpg', 70);

    Storage::disk('public')->put("products/thumb_$filename", $thumbnail);


    Sekarang kamu punya:

    products/abc.jpg
    products/thumb_abc.jpg

    
    
    
    
    
    
    
    ğŸ¯ Best Practice Penyimpanan

    Biasanya struktur seperti ini:

    products/
        original/
        thumbnail/


    Atau:

    products/
        abc.jpg
        thumb_abc.jpg


    Simpan path di database.

    
    
    
    
    
    
    
    ğŸ§  4ï¸âƒ£ Optimasi Tambahan

    Beberapa tips production:

    âœ… Simpan dalam format JPG untuk foto
    âœ… Gunakan quality 60â€“80
    âœ… Hindari simpan PNG besar
    âœ… Batasi ukuran upload (max:2048)
    âœ… Resize sebelum simpan

    
    
    
    
    
    
    
    ğŸ”¥ 5ï¸âƒ£ Kenapa Tidak Resize di Frontend Saja?

    Karena:

    User bisa bypass

    Tidak semua browser konsisten

    Server tetap perlu kontrol

    Image handling harus tetap dilakukan di backend.

    
    
    
    
    
    
    
    ğŸ§  6ï¸âƒ£ Flow Ideal Upload Image

    Validasi (image, mimes, max size)

    Resize

    Compress

    Simpan ke storage

    Simpan path ke DB

    (Optional) Generate thumbnail

    
    
    
    
    
    
    
    âš  Kesalahan Umum Pemula

    âŒ Simpan gambar ukuran asli
    âŒ Tidak compress
    âŒ Tidak buat thumbnail
    âŒ Tampilkan gambar besar di list page
    âŒ Tidak batasi ukuran upload

    
    
    
    
    
    
    
    ğŸ Kesimpulan

    Image handling itu:

    Tentang performa & profesionalisme.

    Kalau kamu lakukan ini dengan benar:

    Website lebih cepat

    Storage lebih hemat

    UX lebih smooth

    Server lebih ringan

    Ini beda antara project latihan dan project production ğŸ”¥







    ADDITIONAL:
    QUESTION: misalkan kita menggunakan image intervention laravel seperti berikut:
    $image = Image::make($file)
        ->resize(800, null, function ($constraint) {
            $constraint->aspectRatio();
            $constraint->upsize();
        })
         ->encode('jpg', 75); // compress 75%
    
    apakah jika gambar berukuran lebih kecil dari ini, maka otomatis di resize juga?




    Jawabannya: Tidak, gambar tidak akan dipaksa menjadi lebih besar (melar/pecah) karena kamu sudah menggunakan fungsi `$constraint->upsize()`.

    Mari kita bedah logikanya agar kamu lebih mantap menggunakannya:

    ### 1. Fungsi dari `upsize()`

    Secara default, jika kamu memerintahkan `resize(800, null)`, Intervention Image akan mencoba mengubah lebar gambar menjadi 800px. Jika gambar aslinya hanya 400px, secara teknis gambar itu akan "ditarik" paksa ke 800px yang mengakibatkan gambar menjadi blur atau pecah.

    Namun, karena kamu menambahkan:
    `$constraint->upsize();`

    Laravel akan berkata: *"Tolong resize ke 800px, KECUALI jika gambar aslinya lebih kecil dari itu, biarkan saja ukurannya tetap asli."*

    ---

    ### 2. Skenario yang Akan Terjadi

    Mari kita lihat perbandingannya berdasarkan kode kamu:

    | Ukuran Gambar Asli | Hasil Setelah Proses | Alasan |
    | --- | --- | --- |
    | 2000px Ã— 1500px | 800px Ã— 600px | Dikecilkan agar sesuai lebar 800px (Aspect Ratio dijaga). |
    | 800px Ã— 600px | 800px Ã— 600px | Tidak berubah karena sudah pas. |
    | 400px Ã— 300px | 400px Ã— 300px | Tetap asli karena ada perintah `upsize()`. Tanpa `upsize()`, dia akan melar ke 800px. |

    ---

    ### 3. Mengapa Tetap Di-encode?

    Meskipun ukurannya tidak berubah (karena terhalang `upsize`), gambar tersebut tetap akan melewati proses:

    1. `encode('jpg', 75)`: Gambar akan tetap dikonversi menjadi format JPG (jika aslinya PNG/WebP) dan kualitasnya dikompres menjadi 75%.
    2. Hasil Akhir: Ukuran dimensi (pixel) tetap kecil, tapi ukuran file (KB) bisa jadi lebih ringan karena kompresi tersebut.

    ---

    ### ğŸ’¡ Tips Tambahan: Kapan `upsize()` Digunakan?

    * Gunakan `upsize()`: Jika kamu ingin menjaga kualitas gambar. Lebih baik menampilkan gambar kecil yang tajam daripada gambar besar yang pecah (*pixelated*).
    * Jangan gunakan `upsize()`: Jika desain website kamu wajib memiliki gambar dengan lebar minimal 800px (misalnya untuk slider layar penuh) dan kamu tidak keberatan jika sedikit blur.

    Saran Sedikit:
    Jika kamu menggunakan Intervention Image versi terbaru (versi 3), sintaksnya sedikit berubah menjadi `resize(width: 800)`. Namun untuk versi 2 (yang paling banyak digunakan di tutorial), kode yang kamu tulis sudah sangat tepat dan aman untuk menjaga performa website kamu!

    Apakah tujuanmu melakukan ini untuk menghemat ruang penyimpanan di server? Karena kombinasi `resize` + `upsize` + `encode(75)` adalah "formula emas" untuk optimasi gambar di Laravel.


</pre>

            </div>
        </main>
    </div>
    <script>
        fetch('layout/aside.html').then( response => response.text()).then( data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(currentPage == 'index.html'){
                    document.getElementById('1-1-php-dasar').classList.add('active');
                } else if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>