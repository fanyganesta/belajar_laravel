<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belajar Laravel</title>

    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>
        <main>
            <header>
                
            </header>

            <div class="content">
<pre>
    ğŸ‘‰ 4ï¸âƒ£ Soft Delete

    Soft delete artinya:

    Data tidak benar-benar dihapus dari database,
    tapi hanya ditandai sebagai â€œterhapusâ€.

    Ini penting banget di dunia nyata.

    
    
    
    
    
    
    
    
    ğŸ§  Kenapa Tidak Langsung Hapus Saja?

    Bayangkan:

    Admin hapus produk tidak sengaja ğŸ˜¬

    User hapus akun lalu ingin kembali

    Data transaksi perlu audit

    Perusahaan butuh histori data

    Kalau pakai delete biasa:

    $product->delete();


    Data hilang permanen âŒ

    Tidak bisa restore.

    
    
    
    
    
    
    
    
    ğŸ”¥ Konsep Soft Delete

    Soft delete bekerja dengan menambahkan kolom:

    deleted_at


    Jika:

    deleted_at = null â†’ data aktif

    deleted_at = timestamp â†’ data dianggap terhapus

    Tapi masih ada di database.

    
    
    
    
    
    
    
    
    ğŸ§± 1ï¸âƒ£ Aktifkan Soft Delete
    Tambahkan kolom di migration:
    $table->softDeletes();


    Atau:

    $table->timestamp('deleted_at')->nullable();


    Lalu migrate:

    php artisan migrate

    
    
    
    
    
    
    
    
    ğŸ§  2ï¸âƒ£ Aktifkan di Model

    Di model:

    use Illuminate\Database\Eloquent\SoftDeletes;

    class Product extends Model
    {
        use SoftDeletes;
    }


    Selesai ğŸ”¥

    Sekarang model sudah support soft delete.

    
    
    
    
    
    
    
    
    ğŸ”¥ 3ï¸âƒ£ Menghapus Data (Soft Delete)
    $product->delete();


    Yang terjadi:

    deleted_at diisi timestamp

    Data tidak benar-benar hilang

   
   
   
   
   
   
   
   
    ğŸ§  4ï¸âƒ£ Query Default Behavior

    Secara default:

    Product::all();


    Laravel otomatis hanya ambil data yang:

    deleted_at IS NULL


    Data yang sudah soft delete tidak ikut.

    
    
    
    
    
    
    
    
    ğŸ”¥ 5ï¸âƒ£ Menampilkan Data yang Terhapus
    Ambil semua termasuk yang terhapus:
    Product::withTrashed()->get();

    Ambil hanya yang terhapus:
    Product::onlyTrashed()->get();

    
    
    
    
    
    
    
    
    ğŸ”¥ 6ï¸âƒ£ Restore Data
    $product->restore();


    Atau:

    Product::withTrashed()->find($id)->restore();


    deleted_at kembali null âœ…

    
    
    
    
    
    
    
    
    ğŸ”¥ 7ï¸âƒ£ Hapus Permanen

    Kalau memang ingin benar-benar hapus:

    $product->forceDelete();


    Baru benar-benar hilang dari database.

    
    
    
    
    
    
    
    
    ğŸ§  8ï¸âƒ£ Soft Delete + File Upload (Penting)

    Kalau model punya file (misalnya gambar):

    Jangan langsung hapus file saat soft delete.

    Karena data bisa di-restore.

    Biasanya file dihapus saat:

    forceDelete()


    Ini best practice production ğŸ”¥

    
    
    
    
    
    
    
    
    ğŸ¯ Contoh Use Case Nyata

    Trash system seperti Gmail

    Soft delete user account

    Arsip produk lama

    Draft post

    Semua pakai soft delete.

    
    
    
    
    
    
    
    
    âš  Kesalahan Umum Pemula

    âŒ Lupa tambahkan use SoftDeletes;
    âŒ Tidak buat kolom deleted_at
    âŒ Hapus file saat soft delete
    âŒ Tidak sediakan fitur restore

    
    
    
    
    
    
    
    
    ğŸ§  Mental Model Soft Delete

    Soft delete itu seperti:

    ğŸ—‘ Masuk ke tempat sampah
    Bukan dibakar.

    Masih bisa dikembalikan.

    
    
    
    
    
    
    
    
    ğŸ Kesimpulan BAB 8

    Sekarang kamu sudah paham:

    1ï¸âƒ£ Upload file
    2ï¸âƒ£ Storage (local vs public)
    3ï¸âƒ£ Image handling
    4ï¸âƒ£ Soft delete

    Ini skill penting untuk aplikasi real-world ğŸ”¥

    Kalau kamu sudah kuasai BAB 8, kamu sudah bisa bikin:

    Marketplace

    Admin panel

    Blog system

    SaaS product

    Sistem manajemen dokumen
</pre>

            </div>
        </main>
    </div>
    <script>
        fetch('layout/aside.html').then( response => response.text()).then( data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(currentPage == 'index.html'){
                    document.getElementById('1-1-php-dasar').classList.add('active');
                } else if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>