<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belajar Laravel</title>

    <link rel="stylesheet" href="css/index.css">
</head>
<body>
    <div class="container">
        <aside id="aside">

        </aside>
        <main>
            <header>
                
            </header>

            <div class="content">
<pre>
    ğŸ‘‰ 5ï¸âƒ£ Event & Listener

    Ini konsep yang dipakai di aplikasi besar banget.

    
    
    
    
    
    
    
    ğŸ§  Kenapa Perlu Event?

    Bayangin kasus ini:

    User register.

    Biasanya kita langsung taruh semua logic di controller:

    User::create($data);
    sendEmail();
    createWallet();
    giveBonus();
    logActivity();


    
    
    
    
    
    
    
    Masalahnya?

    Controller jadi:

    Panjang

    Susah dibaca

    Susah dirawat

    Susah dikembangkan

    ğŸ”¥ Solusinya: Event

    Event adalah:

    Sesuatu yang terjadi di aplikasi.

    Contoh:

    UserRegistered

    OrderCreated

    PaymentSuccess

    ProductDeleted

    Event cuma bilang:

    â€œEh, ini kejadian.â€

    Tidak tahu siapa yang akan merespon.

    
    
    
    
    
    
    
    ğŸ§ Listener Itu Apa?

    Listener adalah:

    Yang mendengarkan event dan melakukan aksi.

    Jadi:

    Event = Pengumuman
    Listener = Yang bertindak

    
    
    
    
    
    
    
    ğŸ§  Ilustrasi Dunia Nyata

    Bayangin alarm kebakaran.

    ğŸ”¥ Alarm berbunyi (Event)
    ğŸš’ Pemadam datang (Listener)
    ğŸšª Orang keluar gedung (Listener)

    Alarm tidak tahu siapa yang datang.

    Itu event-driven system.

    
    
    
    
    
    
    
    ğŸ›  Cara Membuat Event & Listener
    1ï¸âƒ£ Buat Event
    php artisan make:event UserRegistered


    File ada di:

    app/Events/UserRegistered.php


    Isi contoh:

    class UserRegistered
    {
        use Dispatchable, SerializesModels;

        public $user;

        public function __construct($user)
        {
            $this->user = $user;
        }
    }


    Event ini membawa data user.

    
    
    
    
    
    
    
    2ï¸âƒ£ Buat Listener
    php artisan make:listener SendWelcomeEmail


    File di:

    app/Listeners/SendWelcomeEmail.php


    Isi contoh:

    class SendWelcomeEmail
    {
        public function handle(UserRegistered $event)
        {
            Mail::to($event->user->email)
                ->send(new WelcomeMail());
        }
    }


    Listener menerima event dan ambil datanya.

    
    
    
    
    
    
    
    3ï¸âƒ£ Daftarkan di EventServiceProvider

    Buka:

    app/Providers/EventServiceProvider.php


    Tambahkan:

    protected $listen = [
        UserRegistered::class => [
            SendWelcomeEmail::class,
        ],
    ];


    Sekarang terhubung.

    
    
    
    
    
    
    
    4ï¸âƒ£ Trigger Event

    Di controller:

    event(new UserRegistered($user));


    Atau:

    UserRegistered::dispatch($user);


    Boom ğŸ’¥
    Listener jalan otomatis.

    
    
    
    
    
    
    
    ğŸ”¥ Kenapa Ini Powerful?

    Sekarang kalau kamu mau tambah:

    Bonus wallet

    Log activity

    Kirim notifikasi admin

    Tinggal buat listener baru.

    Controller tetap bersih.

    
    
    
    
    
    
    
    ğŸ§  Multiple Listener

    Satu event bisa punya banyak listener:

    UserRegistered::class => [
        SendWelcomeEmail::class,
        CreateUserWallet::class,
        GiveBonus::class,
        LogActivity::class,
    ],


    Semua jalan otomatis.

    
    
    
    
    
    
    
    ğŸš€ Event + Queue (Advanced)

    Listener bisa dijalankan di background.

    Tinggal tambahkan:

    implements ShouldQueue


    Sekarang email tidak menghambat response.

    Ini biasa dipakai di aplikasi besar.

    
    
    
    
    
    
    
    ğŸ§  Kapan Pakai Event?

    Gunakan event ketika:

    âœ… Ada satu kejadian
    âœ… Banyak aksi terjadi dari kejadian itu
    âœ… Mau pisahkan logic
    âœ… Mau sistem scalable
    âœ… Mau background processing

    
    
    
    
    
    
    
    âš  Kesalahan Umum Pemula

    âŒ Semua logic tetap di controller
    âŒ Event terlalu kecil untuk hal sepele
    âŒ Tidak pakai queue untuk proses berat
    âŒ Tidak daftarkan listener

    
    
    
    
    
    
    
    ğŸ¯ Perbandingan Tanpa & Dengan Event

    Tanpa Event:
    Controller gemuk

    Dengan Event:
    Controller tipis
    Logic tersebar rapi
    Mudah dikembangkan

    
    
    
    
    
    
    
    ğŸ Kesimpulan

    Event & Listener adalah:

    ğŸ“£ Sistem notifikasi internal
    ğŸ§© Pemisah logic
    ğŸš€ Fondasi aplikasi besar
    âš¡ Siap untuk queue & scaling

    Kalau kamu ngerti ini, kamu sudah masuk mindset backend engineer.
</pre>

            </div>
        </main>
    </div>
    <script>
        fetch('layout/aside.html').then( response => response.text()).then( data => {
            document.getElementById('aside').innerHTML = data;

            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            const links = document.querySelectorAll('aside a');

            links.forEach(link => {
                if(currentPage == 'index.html'){
                    document.getElementById('1-1-php-dasar').classList.add('active');
                } else if(link.getAttribute('href') == currentPage){
                    link.classList.add('active');
                }
            });
        });
    </script>
</body>
</html>